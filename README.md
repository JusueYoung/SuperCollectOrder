# 超级大利拼
An Algorithm for solve Kaibin's optimal problem

#### 1. 处理结果

见附件 12月大利拼.xlsx  sheet 3， 1月大利拼.xlsx  sheet 3

- 最优化货值：

  ```
  12月总货值 — 4725569
  ```

  ```
  1月总货值 — 4006571
  ```

- 平均可溶品位误差：在数值求解过程中，如果求解时间过短或者参数矩阵结构的固有属性，会带来一定的**精度误差**

  ```
  以12月数据为例，求解时间 = 100s，2度那组数据的实际平均可溶品位 — 1.99997128%
  ```

#### 2. 算法方案

- 建模过程

  | 方案       | 可行性 | 详细分析                                                     |
  | ---------- | ------ | ------------------------------------------------------------ |
  | 穷举法     | NO     | 以12月数据为例，85个货物，8种度数划分，总共有 885≈5.8×1076   |
  | 记忆化搜索 | NO     | 每度里面的**状态**，由这组内的实际**金属量**和**干重吨数**决定，因此状态是无穷的，无法简化问题 |
  | 线性规划   | YES    |                                                              |

  - 抽象出三点重要的逻辑
    - 每一个货物只能选择放到某一个度数分组中
    - 每个度数分组，整体的平均可溶品位必须大于等于这组的度数
    - 最终得到的货值要求最大
  - **图形**表示

  度度度度度v1v2v3v4...v84v858度0010...007度1000...006度0000...01........................2度0100...000度0001...00

  

  - **数学表示**

    minz=−∑i=1n∑j=1mxi,j∗ci,js.t.∑i=1nxi,j=1xi,j=0,1,∀i,j∑j=1mxi,j(mj−sidj)≤0∀i

    xi,j表示第 j 个货物是否放入到第 i 个分组中，是为1，否为0

    ci,j 表示如果第 j 个货物放入到第 i 个分组得到的货值

    mj 表示如果第 j 个货物的金属量

    dj 表示如果第 j 个货物的干重

    mi 表示如果第 i 组对应的平均可溶品位限制

- **yalmip 工具包**求解整数线性规划

  经过以上过程，拼单问题可以简化为一个整数的线性规划问题，结合yalmip工具包可以求解到如下结果

  以1月数据为输入，得到结果如下：4006676是理论的求解上限制。



![image-20220403162036928](/Result\image-20220403162036928.png)

![image-20220403162447230](/Result\image-20220403162447230.png)
